# æ–­ç‚¹æ¢å¤å®éªŒæŒ‡å—

## ğŸ“ å¦‚ä½•æ¢å¤/ç»§ç»­å·²æœ‰å®éªŒ

### æ–¹æ³•1ï¼šä½¿ç”¨ --resume å‚æ•° â­ æ¨è

```bash
conda activate generative_agents_cn
cd generative_agents

# ä»æœ€åä¿å­˜çš„checkpointç»§ç»­
python start.py --name high-freq-test --resume --step 60 --stride 3
```

**è¯´æ˜**ï¼š
- `--resume` ä¼šè‡ªåŠ¨è¯»å–æœ€åä¿å­˜çš„çŠ¶æ€
- ä»ç¬¬46æ­¥ç»§ç»­ï¼ˆå› ä¸ºå·²å®Œæˆ45æ­¥ï¼‰
- `--step 60` è¡¨ç¤ºæ€»å…±è¿è¡Œ60æ­¥ï¼ˆè¿˜ä¼šå†è¿è¡Œ15æ­¥ï¼‰
- æ‰€æœ‰å†å²å¯¹è¯å’ŒçŠ¶æ€éƒ½ä¼šä¿ç•™

---

### æ–¹æ³•2ï¼šæŸ¥çœ‹ç°æœ‰å®éªŒ

```bash
# åˆ—å‡ºæ‰€æœ‰å®éªŒ
dir results\checkpoints\

# æŸ¥çœ‹æŸä¸ªå®éªŒçš„è¯¦æƒ…
dir results\checkpoints\high-freq-test\

# æŸ¥çœ‹å·²å®Œæˆçš„æ­¥æ•°
(dir results\checkpoints\high-freq-test\simulate-*.json).Count
```

---

## ğŸ” æŸ¥çœ‹å®éªŒè¿›åº¦

### æŸ¥çœ‹å¯¹è¯æ•°é‡
```bash
python -c "import json; data = json.load(open('results/checkpoints/high-freq-test/conversation.json', encoding='utf-8')); print(f'å¯¹è¯æ€»æ•°ï¼š{sum(len(v) for v in data.values())}æ¬¡'); print('æ—¶é—´åˆ†å¸ƒï¼š'); [print(f'  {k}: {len(v)}æ¬¡') for k,v in sorted(data.items())]"
```

### æŸ¥çœ‹æœ€æ–°çŠ¶æ€
```bash
# æŸ¥çœ‹æœ€æ–°çš„simulateæ–‡ä»¶
$latest = Get-ChildItem results\checkpoints\high-freq-test\simulate-*.json | Sort-Object LastWriteTime | Select-Object -Last 1
Write-Host "æœ€æ–°çŠ¶æ€: $($latest.Name)"
```

---

## ğŸ“ å®é™…æ“ä½œç¤ºä¾‹

### ç¤ºä¾‹1ï¼šç»§ç»­ high-freq-test åˆ°60æ­¥

```bash
cd C:\Users\admin\Desktop\GenerativeAgentsCN-main\generative_agents
conda activate generative_agents_cn

# æŸ¥çœ‹å½“å‰è¿›åº¦
python -c "import os; files = [f for f in os.listdir('results/checkpoints/high-freq-test') if f.startswith('simulate-')]; print(f'å·²å®Œæˆ {len(files)} æ­¥')"

# ç»§ç»­è¿è¡Œåˆ°60æ­¥
python start.py --name high-freq-test --resume --step 60 --stride 3
```

### ç¤ºä¾‹2ï¼šç»§ç»­ town-test å®éªŒ

```bash
# town-test å®Œæˆäº†20æ­¥ï¼Œæƒ³ç»§ç»­åˆ°50æ­¥
python start.py --name town-test --resume --step 50 --stride 10
```

### ç¤ºä¾‹3ï¼šå¼€å§‹å…¨æ–°å®éªŒ

```bash
# ä½¿ç”¨æ–°åå­—é¿å…è¦†ç›–
python start.py --name ultra-freq-v2 --step 60 --stride 3 --verbose info
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. ä¸è¦æ”¹å˜å…³é”®å‚æ•°
æ¢å¤æ—¶ï¼Œä»¥ä¸‹å‚æ•°ä¼šè‡ªåŠ¨ä»checkpointè¯»å–ï¼š
- èµ·å§‹æ—¶é—´ï¼ˆstart_timeï¼‰
- strideï¼ˆæ—¶é—´æ­¥é•¿ï¼‰
- personasï¼ˆè§’è‰²åˆ—è¡¨ï¼‰

ä½ åªéœ€è¦æŒ‡å®šï¼š
- `--name`ï¼šå®éªŒåç§°
- `--resume`ï¼šæ¢å¤æ ‡å¿—
- `--step`ï¼šæ€»æ­¥æ•°ï¼ˆå¿…é¡»å¤§äºå·²å®Œæˆæ­¥æ•°ï¼‰

### 2. é…ç½®æ–‡ä»¶å˜æ›´
å¦‚æœä¿®æ”¹äº† `data/config.json`ï¼Œæ–°é…ç½®åªä¼šåœ¨æ–°çš„å®éªŒä¸­ç”Ÿæ•ˆã€‚
å·²æœ‰å®éªŒä¼šç»§ç»­ä½¿ç”¨åŸæ¥çš„é…ç½®ã€‚

### 3. å¯¹è¯é—´éš”ä¿®æ”¹
å¦‚æœä¿®æ”¹äº† `modules/agent.py` ä¸­çš„å¯¹è¯é—´éš”ï¼Œæ¢å¤çš„å®éªŒä¼šä½¿ç”¨æ–°çš„é—´éš”è®¾ç½®ï¼ˆå› ä¸ºè¿™æ˜¯ä»£ç é€»è¾‘ï¼Œä¸æ˜¯é…ç½®ï¼‰ã€‚

---

## ğŸ¯ å½“å‰å¯æ¢å¤çš„å®éªŒ

æ ¹æ®ç›®å‰çš„çŠ¶æ€ï¼Œä½ å¯ä»¥æ¢å¤ä»¥ä¸‹å®éªŒï¼š

### high-freq-testï¼ˆæ¨èç»§ç»­ï¼‰
- **å·²å®Œæˆ**ï¼š~45æ­¥ï¼ˆå› Ollamaé—®é¢˜ä¸­æ–­ï¼‰
- **é…ç½®**ï¼šstride=3åˆ†é’Ÿï¼Œ5åˆ†é’Ÿå¯¹è¯é—´éš”ï¼Œ30æ ¼æ„ŸçŸ¥
- **æ¢å¤å‘½ä»¤**ï¼š
  ```bash
  python start.py --name high-freq-test --resume --step 60 --stride 3
  ```

### town-test
- **å·²å®Œæˆ**ï¼š20æ­¥
- **é…ç½®**ï¼šstride=10åˆ†é’Ÿï¼ŒåŸå§‹é…ç½®
- **æ¢å¤å‘½ä»¤**ï¼š
  ```bash
  python start.py --name town-test --resume --step 50 --stride 10
  ```

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šOllamaè¿æ¥å¤±è´¥
**ç—‡çŠ¶**ï¼šKeyboardInterrupt æˆ– ConnectionError

**è§£å†³**ï¼š
```bash
# æ£€æŸ¥OllamaçŠ¶æ€
ollama list

# é‡å¯OllamaæœåŠ¡
# (é‡å¯Ollamaåº”ç”¨å³å¯)

# ç„¶åæ¢å¤å®éªŒ
python start.py --name high-freq-test --resume --step 60
```

### é—®é¢˜2ï¼šæ‰¾ä¸åˆ°checkpoint
**ç—‡çŠ¶**ï¼š`'xxx' doesn't exists`

**è§£å†³**ï¼š
```bash
# æ£€æŸ¥å®éªŒåæ˜¯å¦æ­£ç¡®
dir results\checkpoints\

# ä½¿ç”¨æ­£ç¡®çš„åå­—
python start.py --name [æ­£ç¡®çš„åå­—] --resume --step 60
```

### é—®é¢˜3ï¼šæƒ³è¦é‡æ–°å¼€å§‹
å¦‚æœä¸æƒ³æ¢å¤ï¼Œæƒ³é‡æ–°å¼€å§‹ï¼š

```bash
# æ–¹æ³•1ï¼šä½¿ç”¨ä¸åŒçš„åå­—
python start.py --name high-freq-test-v2 --step 60 --stride 3

# æ–¹æ³•2ï¼šåˆ é™¤æ—§å®éªŒï¼ˆæ…é‡ï¼ï¼‰
rm -r results\checkpoints\high-freq-test\
python start.py --name high-freq-test --step 60 --stride 3
```

---

## ğŸ“Š éªŒè¯æ¢å¤æˆåŠŸ

æ¢å¤åï¼Œæ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š

1. **æ­¥æ•°è¿ç»­**ï¼š
   ```bash
   dir results\checkpoints\high-freq-test\simulate-*.json | Sort-Object Name
   ```
   åº”è¯¥çœ‹åˆ° simulate-20240213-0930.json, 0933.json, ... è¿ç»­çš„æ–‡ä»¶

2. **å¯¹è¯ä¿ç•™**ï¼š
   ```bash
   python -c "import json; print(len(json.load(open('results/checkpoints/high-freq-test/conversation.json', encoding='utf-8'))))"
   ```
   å¯¹è¯æ•°é‡åº”è¯¥æ˜¯ç´¯åŠ çš„

3. **agentsçŠ¶æ€**ï¼š
   æœ€åä¸€ä¸ª simulate-*.json ä¸­ agents çš„ä½ç½®å’ŒçŠ¶æ€åº”è¯¥å»¶ç»­

---

## ğŸš€ å¿«é€Ÿæ¢å¤å‘½ä»¤

```bash
# ä¸€é”®æ¢å¤ high-freq-test
cd C:\Users\admin\Desktop\GenerativeAgentsCN-main\generative_agents
conda activate generative_agents_cn
python start.py --name high-freq-test --resume --step 60 --stride 3 --verbose info
```

å®ŒæˆåæŸ¥çœ‹ç»“æœï¼š
```bash
python -c "import json; data = json.load(open('results/checkpoints/high-freq-test/conversation.json', encoding='utf-8')); print(f'âœ… æ€»å¯¹è¯æ•°ï¼š{sum(len(v) for v in data.values())}æ¬¡')"
```
